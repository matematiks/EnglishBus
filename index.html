<!DOCTYPE html>
<html class="light" lang="tr">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"
        name="viewport" />
    <meta name="theme-color" content="#191022" media="(prefers-color-scheme: dark)">
    <meta name="theme-color" content="#f7f5f8" media="(prefers-color-scheme: light)">
    <title>EnglishBus - Fibonacci SRS</title>

    <!-- Optimizations -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <!-- Preload Critical Hero Image -->
    <link rel="preload" as="image"
        href="https://lh3.googleusercontent.com/aida-public/AB6AXuC0OpuHK5jcUNeZhUPUja-ey5JO0jPZdegtqW3LQw-9KtW9iyy6NDMm9eDOybuVZ_3vpizoPorsdS-0jTIISS5_yWSMKk2P5D067BC_d8PFC0iIZ3VJwVqoXH-pouo_parT2fxmCS78k5ZxXUnYxZpDKQAZ1dBCOlAIRLfRImXE9JOZNPW85VAH94r2hxobWrwaGDNLndXnMv33iPF8aFhBQsvwhipAnLll48ldALSRUZUHQoIDKD5R8wW4loW5ncNAOeDIeshy2ySi">

    <!-- Framework & Fonts -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;500;600;700;800;900&display=swap"
        rel="stylesheet" />
    <!-- CHANGED: display=block to prevent text ligature from showing before font loads -->
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=block"
        rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Canvas Confetti -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <!-- Tailwind Config -->
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        brand: {
                            50: '#F0E6FF',
                            100: '#D6BCFA',
                            200: '#B794F4',
                            300: '#9F7AEA',
                            400: '#805AD5',
                            400: '#805AD5',
                            500: 'rgb(var(--color-brand-500) / <alpha-value>)', // MAIN BRAND (Themable)
                            600: '#4700D8', // PRIMARY ACTION
                            700: '#320096',
                            800: '#210063',
                            900: '#1A004F'
                        },
                        accent: {
                            300: '#FF85B3', // Soft Pink
                            400: '#F687B3',
                            500: '#F900BF', // MAIN ACCENT
                            600: '#D53F8C'
                        },
                        // Mappings for Stitch code compatibility if needed, though we prefer brand-*
                        "primary": "#9900F0",
                        "background-light": "#f7f5f8",
                        "background-dark": "#191022",
                    },
                    fontFamily: {
                        "display": ["Lexend", "sans-serif"],
                        "sans": ["Lexend", "sans-serif"] // Override default sans
                    },
                    borderRadius: {
                        "DEFAULT": "0.5rem",
                        "lg": "1rem",
                        "xl": "1.5rem",
                        "2xl": "2rem", // Added for conformity
                        "full": "9999px"
                    },
                    animation: {
                        'blob': 'blob 10s infinite',
                        'shimmer': 'shimmer 3s linear infinite',
                        'bounce-soft': 'bounce-soft 2s infinite',
                        'float': 'float 6s ease-in-out infinite',
                        'fade-out': 'fadeOut 0.5s ease-out forwards',
                    },
                    keyframes: {
                        blob: {
                            '0%': { transform: 'translate(0px, 0px) scale(1)' },
                            '33%': { transform: 'translate(30px, -50px) scale(1.1)' },
                            '66%': { transform: 'translate(-20px, 20px) scale(0.9)' },
                            '100%': { transform: 'translate(0px, 0px) scale(1)' }
                        },
                        shimmer: {
                            '0%': { left: '-100%' },
                            '100%': { left: '200%' }
                        },
                        'bounce-soft': {
                            '0%, 100%': { transform: 'scale(1)' },
                            '50%': { transform: 'scale(1.05)' }
                        },
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                        fadeOut: {
                            '0%': { opacity: '1' },
                            '100%': { opacity: '0', pointerEvents: 'none' }
                        }
                    }
                },
            },
        }
    </script>

    <style>
        /* === ANIMATIONS.CSS === */
        @keyframes blob {
            0% {
                transform: translate(0px, 0px) scale(1);
            }

            33% {
                transform: translate(30px, -50px) scale(1.1);
            }

            66% {
                transform: translate(-20px, 20px) scale(0.9);
            }

            100% {
                transform: translate(0px, 0px) scale(1);
            }
        }

        .animate-blob {
            animation: blob 10s infinite;
        }

        .shimmer {
            position: relative;
            overflow: hidden;
        }

        .shimmer::after {
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            transform: translateX(-100%);
            background-image: linear-gradient(90deg,
                    rgba(255, 255, 255, 0) 0,
                    rgba(255, 255, 255, 0.2) 20%,
                    rgba(255, 255, 255, 0.5) 60%,
                    rgba(255, 255, 255, 0));
            animation: shimmer 3s infinite;
            content: '';
        }

        @keyframes shimmer {
            100% {
                transform: translateX(100%);
            }
        }

        /* Spring Button Press */
        .btn-press:active {
            transform: scale(0.92);
            transition: transform 0.1s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        /* Staggered Entrance */
        @keyframes fadeSlideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-enter {
            animation: fadeSlideUp 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
            opacity: 0;
            /* Star hidden */
        }

        .delay-100 {
            animation-delay: 100ms;
        }

        .delay-200 {
            animation-delay: 200ms;
        }

        .delay-300 {
            animation-delay: 300ms;
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        .animate-float {
            animation: float 6s ease-in-out infinite;
        }

        @keyframes bounce-soft {

            0%,
            100% {
                transform: translateY(0) scale(1);
            }

            50% {
                transform: translateY(-5px) scale(1.02);
            }
        }

        .animate-bounce-soft {
            animation: bounce-soft 3s infinite;
        }

        @keyframes element-up {
            from {
                transform: translateY(100%);
                opacity: 0;
            }

            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .animate-element-up {
            animation: element-up 0.5s cubic-bezier(0.19, 1, 0.22, 1) forwards;
        }


        /* === GLASS.CSS === */
        /* Global Glass Base */
        .glass {
            background: rgba(255, 255, 255, 0.65);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border-top: 1px solid rgba(255, 255, 255, 0.5);
            border-left: 1px solid rgba(255, 255, 255, 0.3);
            border-right: 1px solid rgba(255, 255, 255, 0.2);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow:
                0 4px 6px -1px rgba(0, 0, 0, 0.05),
                0 2px 4px -1px rgba(0, 0, 0, 0.03),
                inset 0 0 20px rgba(255, 255, 255, 0.2);
        }

        /* Dark Mode Glass */
        .dark .glass {
            background: rgba(25, 16, 34, 0.6);
            border-top: 1px solid rgba(255, 255, 255, 0.15);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
        }

        /* Glass Panel (lighter variant for inner cards) */
        .glass-panel {
            background: rgba(255, 255, 255, 0.5);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.4);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }

        .dark .glass-panel {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        /* Glass Stich Style for Items */
        .glass-stich {
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(8px);
            box-shadow: 0 2px 10px rgba(153, 0, 240, 0.05);
        }


        /* === CUSTOM.CSS (Main Layout) === */
        :root {
            --safe-bottom: env(safe-area-inset-bottom, 20px);
            --color-brand-500: 153 0 240;
            /* Default Purple */
        }

        body {
            background-color: #f7f5f8;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            overflow-x: hidden;
            /* Prevent horizontal scroll from blobs */
        }

        .dark body {
            background-color: #191022;
        }

        /* Hide Scrollbar but allow scroll */
        ::-webkit-scrollbar {
            width: 0px;
            background: transparent;
        }

        /* Screen Transitions */
        .screen {
            transition: opacity 0.3s ease, transform 0.3s ease;
            opacity: 1;
        }

        .screen.hidden {
            display: none;
            opacity: 0;
            pointer-events: none;
            transform: scale(0.98);
        }

        /* Mobile Specifics */
        .safe-pb {
            padding-bottom: max(1rem, var(--safe-bottom));
        }

        /* Nav Item Active State Indicator */
        .nav-item.active div {
            background-color: #F0E6FF;
            /* brand-50 */
            color: #9900F0;
            /* brand-500 */
        }

        .nav-item.active span {
            color: #9900F0;
        }

        /* Background Blobs Layering */
        .bg-blob {
            position: fixed;
            z-index: 0;
            filter: blur(80px);
            opacity: 0.6;
        }

        .layout-container {
            position: relative;
            z-index: 10;
        }

        /* Card Image Containment */
        .perspective-1000 {
            perspective: 1000px;
        }

        /* Glow Effect for Buttons */
        .glow {
            position: relative;
            overflow: hidden;
        }

        .glow::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: 0.5s;
        }

        .glow:hover::before {
            left: 100%;
        }

        /* 3D Flip Utilities */
        .preserve-3d {
            transform-style: preserve-3d;
        }

        .backface-hidden {
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
        }

        .rotate-y-180 {
            transform: rotateY(180deg);
        }
    </style>
</head>

<body class="min-h-screen relative selection:bg-brand-500 selection:text-white">

    <!-- GLOBAL LOADING OVERLAY -->
    <div id="global-loader"
        class="fixed inset-0 z-[100] bg-white flex flex-col items-center justify-center transition-opacity duration-500">
        <div class="relative">
            <div
                class="size-16 rounded-2xl bg-brand-500 animate-bounce-soft flex items-center justify-center shadow-lg shadow-brand-500/30">
                <span class="text-3xl">üöÄ</span>
            </div>
            <div
                class="absolute -bottom-4 left-1/2 -translate-x-1/2 w-12 h-1 bg-black/10 blur-sm rounded-full animate-pulse">
            </div>
        </div>
        <p class="mt-6 text-brand-600 font-bold text-sm tracking-widest animate-pulse">ENGLISHBUS</p>
    </div>

    <!-- Loader Script -->
    <script>
        window.addEventListener('load', () => {
            const loader = document.getElementById('global-loader');
            // Small delay to ensure Tailwind parse is done visually
            setTimeout(() => {
                loader.classList.add('opacity-0', 'pointer-events-none');
                setTimeout(() => loader.remove(), 500);
            }, 300);
        });
    </script>

    <!-- Decorative Background (Stitch Style) -->
    <div class="bg-blob w-96 h-96 bg-brand-500/30 rounded-full -top-20 -left-20 animate-blob"></div>
    <div class="bg-blob w-[500px] h-[500px] bg-accent-300/20 rounded-full top-1/2 -right-40 animate-blob"
        style="animation-delay: 2s"></div>
    <div class="bg-blob w-80 h-80 bg-brand-600/20 rounded-full bottom-0 left-1/4 animate-blob"
        style="animation-delay: 4s"></div>

    <!-- MAIN APP CONTAINER -->
    <div class="layout-container flex flex-col min-h-screen relative z-10">

        <!-- SCREENS PLACEHOLDERS -->
        <div id="login-screen" class="screen hidden min-h-screen flex flex-col items-center relative z-50">
            <div
                class="glass-panel rounded-3xl p-8 w-full max-w-md mx-4 relative overflow-hidden group shadow-2xl my-auto">
                <!-- Decor Blob -->
                <div
                    class="absolute top-0 right-0 w-32 h-32 bg-brand-500/10 rounded-full blur-2xl -mr-10 -mt-10 pointer-events-none">
                </div>

                <!-- Icon & Title -->
                <div class="text-center mb-8 relative z-10">
                    <div
                        class="size-20 bg-brand-600 text-white rounded-2xl mx-auto flex items-center justify-center text-4xl shadow-xl shadow-brand-600/30 mb-6 animate-bounce-soft">
                        üöÄ</div>
                    <h1 class="text-3xl font-black text-gray-900 mb-2 tracking-tight">Ho≈ü Geldin</h1>
                    <p class="text-gray-500 text-sm font-medium">Fibonacci tekniƒüi ile kalƒ±cƒ± √∂ƒüren.</p>
                </div>

                <!-- Inputs -->
                <div class="space-y-4 relative z-10">
                    <input type="text" id="login-username"
                        class="w-full h-14 bg-white/50 border border-white/60 rounded-xl px-5 font-bold text-gray-800 placeholder-gray-400 focus:border-brand-500 focus:ring-brand-500 focus:bg-white transition-all shadow-sm"
                        placeholder="Kullanƒ±cƒ± Adƒ±" autocomplete="username">
                    <input type="password" id="login-password"
                        class="w-full h-14 bg-white/50 border border-white/60 rounded-xl px-5 font-bold text-gray-800 placeholder-gray-400 focus:border-brand-500 focus:ring-brand-500 focus:bg-white transition-all shadow-sm"
                        placeholder="≈ûifre" autocomplete="current-password">
                    <button onclick="handleLogin()"
                        class="w-full h-14 bg-brand-600 hover:bg-brand-500 text-white font-bold rounded-xl shadow-lg shadow-brand-600/30 active:scale-95 transition-all text-lg tracking-wide hover:-translate-y-0.5">Gƒ∞Rƒ∞≈û
                        YAP</button>
                </div>

                <!-- Footer -->
                <p class="text-center mt-6 text-sm text-gray-500 font-bold relative z-10">
                    Hesabƒ±n yok mu? <a href="#" onclick="showScreen('register-screen')"
                        class="text-brand-600 hover:text-brand-700 hover:underline">Kaydol</a>
                </p>

                <div id="login-error"
                    class="hidden mt-4 p-3 bg-red-50 border border-red-100 text-red-500 rounded-xl text-sm font-bold text-center animate-pulse">
                </div>
            </div>

            <!-- Static Footer (Scroll to view) -->
            <footer class="w-full py-6 text-center z-10 opacity-60 hover:opacity-100 transition-opacity">
                <p class="text-[10px] text-gray-500 font-bold">EnglishBus Engine v1.61803</p>
                <p class="text-[9px] text-gray-400">¬© 2024 EnglishBus Scientific Spaced Repetition Platform</p>
            </footer>
        </div>

        <div id="register-screen" class="screen hidden min-h-screen flex items-center justify-center relative z-50">
            <div class="glass-panel rounded-3xl p-8 w-full max-w-md mx-4 relative overflow-hidden group shadow-2xl">
                <div class="text-center mb-6 relative z-10">
                    <h1 class="text-3xl font-black text-gray-900 mb-2 tracking-tight">Hesap Olu≈ütur</h1>
                    <p class="text-gray-500 text-sm font-medium">Hemen √∂ƒürenmeye ba≈üla.</p>
                </div>

                <div class="space-y-4 relative z-10">
                    <input type="text" id="register-username"
                        class="w-full h-14 bg-white/50 border border-white/60 rounded-xl px-5 font-bold text-gray-800 placeholder-gray-400 focus:border-green-500 focus:ring-green-500 focus:bg-white transition-all shadow-sm"
                        placeholder="Kullanƒ±cƒ± Adƒ±" autocomplete="username">
                    <input type="password" id="register-password"
                        class="w-full h-14 bg-white/50 border border-white/60 rounded-xl px-5 font-bold text-gray-800 placeholder-gray-400 focus:border-green-500 focus:ring-green-500 focus:bg-white transition-all shadow-sm"
                        placeholder="≈ûifre" autocomplete="new-password">

                    <!-- Teacher Toggle -->
                    <div class="bg-white/50 rounded-xl p-4 border border-white/60">
                        <label class="flex items-start gap-3 cursor-pointer">
                            <input type="checkbox" id="register-is-teacher" onchange="toggleTeacherFields()"
                                class="w-5 h-5 text-brand-600 rounded bg-white border-gray-300 focus:ring-brand-500 mt-1">
                            <div>
                                <span class="font-bold text-gray-800 block text-sm">üë®‚Äçüè´ √ñƒüretmen Hesabƒ±</span>
                                <p class="text-[10px] text-gray-500 mt-0.5 font-medium">Sƒ±nƒ±f y√∂netimi i√ßin.</p>
                            </div>
                        </label>
                    </div>

                    <div id="student-teacher-id-field" class="hidden animate-float">
                        <label class="block text-xs font-bold text-gray-500 mb-1 ml-1 uppercase">√ñƒüretmen ID
                            (Opsiyonel)</label>
                        <input type="text" id="register-teacher-id" placeholder="12345" maxlength="5"
                            class="w-full h-12 bg-white/50 border border-white/60 rounded-xl px-5 font-bold text-gray-800 focus:border-blue-500 focus:ring-blue-500 transition-all">
                    </div>

                    <button onclick="handleRegister()"
                        class="w-full h-14 bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold rounded-xl shadow-lg shadow-green-500/30 hover:scale-[1.02] active:scale-95 transition-all text-lg tracking-wide">KAYIT
                        OL</button>
                </div>

                <p class="text-center mt-6 text-sm text-gray-500 font-bold relative z-10">
                    Zaten hesabƒ±n var mƒ±? <a href="#" onclick="showScreen('login-screen')"
                        class="text-brand-600 hover:text-brand-700 hover:underline">Giri≈ü Yap</a>
                </p>
                <div id="register-error"
                    class="hidden mt-4 p-3 bg-red-50 text-red-500 rounded-xl text-sm font-bold text-center"></div>
            </div>
        </div>

        <div id="dashboard-screen" class="screen hidden flex-col min-h-screen">
            <!-- Header -->
            <!-- Header -->
            <header class="sticky top-0 z-50 glass border-b border-brand-100/20 px-4 md:px-8 py-3 mb-4">
                <div class="max-w-[800px] mx-auto flex items-center justify-between">
                    <div class="flex items-center gap-3 text-brand-600">
                        <div
                            class="size-10 bg-brand-600 text-white rounded-xl flex items-center justify-center shadow-lg shadow-brand-600/20">
                            <span class="material-symbols-outlined">directions_bus</span>
                        </div>
                        <div class="hidden md:block">
                            <h2 class="text-gray-900 dark:text-white text-lg font-bold leading-tight">EnglishBus</h2>
                            <span class="text-[10px] text-brand-500 font-bold uppercase tracking-widest">Fibonacci
                                SRS</span>
                        </div>
                    </div>

                    <div class="flex flex-1 justify-end gap-3 items-center">
                        <div class="flex gap-2">
                            <!-- Messages -->
                            <button type="button" onclick="toggleMessagesPanel()" aria-label="Mesajlar"
                                class="flex items-center justify-center rounded-xl h-10 w-10 bg-white/60 hover:bg-white border border-white/40 transition-all text-gray-700 relative shadow-sm">
                                <span class="material-symbols-outlined text-[20px]">chat_bubble</span>
                                <span id="dashboard-msg-badge"
                                    class="absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-[10px] font-bold text-white ring-2 ring-white hidden">0</span>
                            </button>

                            <!-- Settings -->
                            <button id="btn-settings-toggle" type="button" onclick="showScreen('settings-screen')"
                                aria-label="Ayarlar"
                                class="flex items-center justify-center rounded-xl h-10 w-10 bg-white/60 hover:bg-white border border-white/40 transition-all text-gray-700 shadow-sm">
                                <span class="material-symbols-outlined text-[20px]">settings</span>
                            </button>

                            <!-- Logout -->
                            <button type="button" onclick="handleLogout()" aria-label="√áƒ±kƒ±≈ü Yap"
                                class="flex items-center justify-center rounded-xl h-10 w-10 bg-white/60 hover:bg-red-50 border border-white/40 transition-all text-red-500 hover:text-red-600 shadow-sm"
                                title="√áƒ±kƒ±≈ü">
                                <span class="material-symbols-outlined text-[20px]">logout</span>
                            </button>
                        </div>

                        <!-- User Profile -->
                        <div class="flex items-center gap-3 pl-2 border-l border-gray-200/50">
                            <div class="text-right hidden md:block">
                                <p id="dashboard-username" class="text-sm font-bold text-gray-800 leading-none">
                                    Y√ºkleniyor...</p>
                                <p class="text-[10px] text-gray-500 font-medium mt-0.5">√ñƒürenci</p>
                            </div>
                            <!-- Avatar / Initial -->
                            <div
                                class="size-10 rounded-full bg-gradient-to-br from-brand-500 to-accent-500 flex items-center justify-center text-white font-bold shadow-md ring-2 ring-white/50">
                                <span id="user-initial" class="text-lg">U</span>
                            </div>
                        </div>
                    </div>
                </div>
            </header>

            <main class="px-4 md:px-8 max-w-[800px] mx-auto w-full pb-20">
                <!-- Hero Card -->
                <div
                    class="glass flex flex-col md:flex-row items-stretch justify-start rounded-2xl overflow-hidden shadow-sm mb-[18px] group">
                    <!-- Image Side -->
                    <div class="w-full md:w-1/3 md:basis-1/3 md:shrink-0 h-44 md:h-auto bg-center bg-no-repeat bg-cover relative"
                        style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuC0OpuHK5jcUNeZhUPUja-ey5JO0jPZdegtqW3LQw-9KtW9iyy6NDMm9eDOybuVZ_3vpizoPorsdS-0jTIISS5_yWSMKk2P5D067BC_d8PFC0iIZ3VJwVqoXH-pouo_parT2fxmCS78k5ZxXUnYxZpDKQAZ1dBCOlAIRLfRImXE9JOZNPW85VAH94r2hxobWrwaGDNLndXnMv33iPF8aFhBQsvwhipAnLll48ldALSRUZUHQoIDKD5R8wW4loW5ncNAOeDIeshy2ySi");'>
                        <div
                            class="absolute inset-0 bg-brand-900/40 backdrop-grayscale-[0.2] group-hover:bg-brand-900/30 transition-all">
                        </div>
                        <div class="absolute top-4 left-4 text-4xl drop-shadow-lg">üá¨üáß</div>
                    </div>

                    <!-- Content Side -->
                    <div class="flex w-full grow flex-col justify-center gap-3 py-4 px-6 md:px-8">
                        <div>
                            <span
                                class="px-2 py-0.5 bg-brand-100 text-brand-700 text-[10px] font-bold rounded-full uppercase tracking-wider mb-2 inline-block">Aktif
                                Kurs</span>
                            <h2 id="dashboard-course-name"
                                class="text-gray-900 dark:text-white text-2xl md:text-3xl font-black leading-tight">
                                Y√ºkleniyor...</h2>
                            <p id="dashboard-course-stats" class="text-gray-500 text-xs font-medium mt-1">- Kelime ‚Ä¢ -
                            </p>
                            <!-- Word Counts by Level -->
                            <!-- Word Counts by Level (3-Card Layout) -->
                            <div id="dashboard-word-stats" class="grid grid-cols-3 gap-2 mt-4 hidden">
                                <div class="bg-gray-50 border border-gray-100 rounded-xl p-1.5 text-center shadow-sm">
                                    <div class="text-[10px] text-gray-500 font-bold uppercase tracking-wider mb-1">Yeni
                                        G√∂r√ºld√º</div>
                                    <div id="stat-new-seen" class="text-xl font-black text-gray-800">0</div>
                                </div>
                                <div class="bg-blue-50 border border-blue-100 rounded-xl p-1.5 text-center shadow-sm">
                                    <div class="text-[10px] text-blue-500 font-bold uppercase tracking-wider mb-1">Orta
                                        Seviye</div>
                                    <div id="stat-mid-level" class="text-xl font-black text-blue-700">0</div>
                                </div>
                                <div class="bg-green-50 border border-green-100 rounded-xl p-1.5 text-center shadow-sm">
                                    <div class="text-[10px] text-green-500 font-bold uppercase tracking-wider mb-1">ƒ∞yi
                                        √ñƒürenildi</div>
                                    <div id="stat-mastered" class="text-xl font-black text-green-700">0</div>
                                </div>
                            </div>
                        </div>

                        <div class="flex flex-col gap-2">
                            <div class="flex justify-between items-end">
                                <span class="text-xs font-bold text-gray-400 uppercase tracking-wider">ƒ∞lerleme</span>
                                <span id="dashboard-progress-percent"
                                    class="text-brand-600 text-lg font-black">0%</span>
                            </div>
                            <div class="h-3 rounded-full bg-gray-100 overflow-hidden relative">
                                <div id="dashboard-progress-bar"
                                    class="h-full rounded-full bg-gradient-to-r from-brand-400 to-brand-600 shadow-sm shimmer"
                                    style="width: 0%"></div>
                            </div>
                        </div>

                        <div class="mt-2">
                            <button id="btn-main-start" type="button"
                                class="w-full bg-brand-600 hover:bg-brand-500 text-white text-sm font-bold py-3 px-8 rounded-xl shadow-lg shadow-brand-600/30 hover:scale-[1.02] active:scale-95 transition-all flex items-center justify-center gap-2">
                                <span class="material-symbols-outlined">play_circle</span>
                                <span>√áALI≈ûMAYA BA≈ûLA</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Bento Grid Stats -->
                <!-- Bento Grid Stats - REPETITION BASED -->
                <!-- Bento Grid Stats - REPETITION BASED -->
                <div class="grid grid-cols-3 gap-3 mb-[18px] animate-enter delay-200">

                    <!-- Yeni G√∂r√ºld√º (1-5 Reps) -->
                    <div
                        class="glass p-4 rounded-xl relative overflow-hidden group hover:-translate-y-1 transition-transform duration-300">
                        <div class="flex items-center gap-3 relative z-10">
                            <div
                                class="size-10 rounded-xl bg-indigo-100 flex items-center justify-center text-indigo-600 shrink-0">
                                <span class="material-symbols-outlined text-xl">school</span>
                            </div>
                            <div>
                                <p
                                    class="text-[10px] font-bold text-gray-400 uppercase tracking-wider leading-none mb-1">
                                    Yeni G√∂r√ºld√º</p>
                                <p id="stat-new-count" class="text-xl font-black text-gray-800 leading-none">0</p>
                            </div>
                        </div>
                        <div
                            class="absolute -bottom-4 -right-4 w-16 h-16 bg-indigo-500/10 blur-xl rounded-full group-hover:bg-indigo-500/20 transition-colors">
                        </div>
                    </div>

                    <!-- Orta Seviye (6-10 Reps) -->
                    <div
                        class="glass p-4 rounded-xl relative overflow-hidden group hover:-translate-y-1 transition-transform duration-300">
                        <div class="flex items-center gap-3 relative z-10">
                            <div
                                class="size-10 rounded-xl bg-orange-100 flex items-center justify-center text-orange-500 shrink-0">
                                <span class="material-symbols-outlined text-xl">fitness_center</span>
                            </div>
                            <div>
                                <p
                                    class="text-[10px] font-bold text-gray-400 uppercase tracking-wider leading-none mb-1">
                                    Orta Seviye</p>
                                <p id="stat-mid-count" class="text-xl font-black text-gray-800 leading-none">0</p>
                            </div>
                        </div>
                        <div
                            class="absolute -bottom-4 -right-4 w-16 h-16 bg-orange-500/10 blur-xl rounded-full group-hover:bg-orange-500/20 transition-colors">
                        </div>
                    </div>

                    <!-- ƒ∞yi √ñƒürenildi (11+ Reps) -->
                    <div
                        class="glass p-4 rounded-xl relative overflow-hidden group hover:-translate-y-1 transition-transform duration-300">
                        <div class="flex items-center gap-3 relative z-10">
                            <div
                                class="size-10 rounded-xl bg-emerald-100 flex items-center justify-center text-emerald-600 shrink-0">
                                <span class="material-symbols-outlined text-xl">psychology</span>
                            </div>
                            <div>
                                <p
                                    class="text-[10px] font-bold text-gray-400 uppercase tracking-wider leading-none mb-1">
                                    ƒ∞yi √ñƒürenildi</p>
                                <p id="stat-master-count" class="text-xl font-black text-gray-800 leading-none">0</p>
                            </div>
                        </div>
                        <div
                            class="absolute -bottom-4 -right-4 w-16 h-16 bg-emerald-500/10 blur-xl rounded-full group-hover:bg-emerald-500/20 transition-colors">
                        </div>
                    </div>
                </div>

                <!-- Hidden Old Mode Switcher (Replacing with Bottom Nav or integrating elsewhere) -->
                <!-- Ideally Mode Switching is a main action or part of the 'Start' flow -->
                <!-- Mode Switcher -->
                <div class="flex flex-col md:flex-row gap-[18px] mb-[18px]">
                    <button id="btn-mode-words" onclick="switchStudyMode('words')"
                        class="flex-1 flex items-center justify-center gap-3 bg-white/60 border-2 border-brand-500 rounded-xl py-4 transition-all glass hover:bg-white shadow-sm group">
                        <div
                            class="p-2 bg-brand-100 rounded-lg text-brand-600 group-hover:scale-110 transition-transform">
                            <span class="material-symbols-outlined">book</span>
                        </div>
                        <span class="text-gray-800 font-bold">Kelime Kartlarƒ±</span>
                    </button>
                    <button id="btn-mode-sentences" onclick="switchStudyMode('sentences')"
                        class="flex-1 flex items-center justify-center gap-3 bg-white/40 hover:bg-white/60 border border-white/20 rounded-xl py-4 transition-all glass hover:shadow-sm text-gray-500 hover:text-gray-700">
                        <div class="p-2 bg-gray-100 rounded-lg text-gray-400"><span
                                class="material-symbols-outlined">chat</span></div>
                        <span class="font-bold">C√ºmle Pratiƒüi</span>
                    </button>
                </div>

                <div id="dashboard-units-container" class="flex flex-col gap-3 min-h-[200px]">
                    <!-- JS Injected Content -->
                    <div class="flex flex-col items-center justify-center h-48 text-gray-400 gap-2">
                        <span class="material-symbols-outlined text-4xl animate-spin">sync</span>
                        <p class="text-xs font-medium">Y√ºkleniyor...</p>
                    </div>
                </div>

            </main>

            <!-- Static Footer (Scroll to view) -->
            <footer class="w-full mt-auto py-6 text-center z-10 opacity-60 hover:opacity-100 transition-opacity">
                <p class="text-[10px] text-gray-500 font-bold">EnglishBus Engine v1.61803</p>
                <p class="text-[9px] text-gray-400">¬© 2024 EnglishBus Scientific Spaced Repetition Platform</p>
            </footer>
        </div>

        <div id="settings-screen" class="screen hidden min-h-screen pb-20 relative z-30">
            <!-- Sticky Header Section -->
            <div class="sticky top-0 z-50 w-full glass border-b border-gray-100/20 px-4 md:px-8 py-4 mb-8">
                <div class="max-w-[900px] mx-auto flex items-center justify-between">
                    <div class="flex items-center gap-4">
                        <button onclick="showScreen('dashboard-screen')"
                            class="group relative size-10 flex items-center justify-center rounded-2xl bg-white/50 border border-white/60 hover:bg-white transition-all">
                            <span
                                class="material-symbols-outlined text-gray-600 group-hover:-translate-x-1 transition-transform">arrow_back</span>
                        </button>
                        <div>
                            <h1 class="text-xl md:text-2xl font-black text-gray-900 tracking-tight leading-none">
                                Ayarlar</h1>
                            <div class="flex items-center gap-2 mt-1">
                                <span class="size-1.5 rounded-full bg-green-500 animate-pulse"></span>
                                <p class="text-gray-400 text-[10px] font-bold uppercase tracking-wider">
                                    Sistem √áevrimi√ßi</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="max-w-[900px] mx-auto px-4 md:px-8 space-y-8 animate-fade-in">
                <!-- Profile Identity Widget -->
                <section
                    class="glass-panel rounded-[2.5rem] p-6 md:p-8 flex flex-col md:flex-row items-center gap-8 shadow-2xl relative overflow-hidden group">
                    <div
                        class="absolute -top-10 -right-10 size-40 bg-brand-500/5 rounded-full blur-3xl group-hover:scale-150 transition-transform duration-1000">
                    </div>

                    <div class="relative shrink-0">
                        <div
                            class="size-24 md:size-28 rounded-[2rem] bg-gradient-to-br from-brand-500 to-accent-500 p-1 shadow-2xl rotate-3 group-hover:rotate-0 transition-transform duration-500">
                            <div
                                class="w-full h-full bg-white rounded-[1.8rem] overflow-hidden flex items-center justify-center relative">
                                <!-- Avatar Display -->
                                <div id="settings-avatar-display" class="text-6xl select-none">üë§
                                </div>
                                <button onclick="SettingsManager.openAvatarSelection()"
                                    class="absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity cursor-pointer">
                                    <span class="material-symbols-outlined">edit</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="text-center md:text-left flex-1 space-y-3">
                        <div class="space-y-1">
                            <div class="flex flex-wrap justify-center md:justify-start items-center gap-3">
                                <h2 id="settings-username"
                                    class="text-2xl md:text-3xl font-black text-gray-900 leading-none">
                                    Kullanƒ±cƒ±</h2>
                                <div
                                    class="bg-brand-500 px-3 py-1 rounded-full text-white text-[10px] font-black uppercase tracking-widest shadow-lg shadow-brand-500/20">
                                    Bƒ∞REYSEL</div>
                            </div>
                        </div>

                        <!-- Stats Removed -->
                    </div>
                </section>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Algoritma & Akƒ±≈ü -->
                    <section>
                        <div class="glass-panel rounded-[2.5rem] p-6 md:p-8 space-y-6 shadow-xl h-full">
                            <div class="flex items-center gap-4">
                                <div class="size-10 rounded-xl bg-brand-500/10 flex items-center justify-center">
                                    <span class="material-symbols-outlined text-brand-500">neurology</span>
                                </div>
                                <h3 class="text-lg font-bold text-gray-800 tracking-tight">Algoritma
                                    & Akƒ±≈ü</h3>
                            </div>

                            <div class="space-y-6">
                                <!-- Auto Audio -->
                                <div class="flex items-center justify-between">
                                    <p class="font-bold text-gray-800 text-sm">Otomatik Telaffuz</p>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" id="settings-auto-audio" class="sr-only peer">
                                        <div
                                            class="w-12 h-7 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-5 peer-checked:after:border-white after:content-[''] after:absolute after:top-[4px] after:left-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all hover:after:scale-90 peer-checked:bg-brand-500 shadow-inner transition-colors">
                                        </div>
                                    </label>
                                </div>

                                <!-- Show Images -->
                                <div class="flex items-center justify-between">
                                    <p class="font-bold text-gray-800 text-sm">G√∂rsel Destek</p>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" id="settings-show-images" class="sr-only peer">
                                        <div
                                            class="w-12 h-7 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-5 peer-checked:after:border-white after:content-[''] after:absolute after:top-[4px] after:left-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all hover:after:scale-90 peer-checked:bg-accent-500 shadow-inner transition-colors">
                                        </div>
                                    </label>
                                </div>
                                <!-- Audio Speed -->
                                <div class="space-y-3">
                                    <div class="flex justify-between items-center">
                                        <span
                                            class="font-bold text-gray-700 text-xs uppercase tracking-wider">Hƒ±z</span>
                                        <span id="settings-speed-val"
                                            class="px-2 py-0.5 bg-brand-500/10 text-brand-500 rounded text-[10px] font-black">1.0x</span>
                                    </div>
                                    <input type="range" id="settings-audio-speed" min="0.75" max="1.25" step="0.05"
                                        value="1.0"
                                        class="w-full h-1.5 bg-gray-200 rounded-full appearance-none cursor-pointer accent-brand-500">
                                </div>

                                <!-- Daily Goal -->
                                <div class="space-y-3 pt-2 border-t border-gray-100">
                                    <div class="flex justify-between items-center">
                                        <span class="font-bold text-gray-700 text-xs uppercase tracking-wider">G√ºnl√ºk
                                            Hedef</span>
                                        <span id="goal-display"
                                            class="px-2 py-0.5 bg-accent-500/10 text-accent-500 rounded text-[10px] font-black">10
                                            Kelime</span>
                                    </div>
                                    <input type="range" id="settings-daily-goal" min="5" max="50" step="5" value="10"
                                        class="w-full h-1.5 bg-gray-200 rounded-full appearance-none cursor-pointer accent-accent-500">
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Aray√ºz -->
                    <section>
                        <div class="glass-panel rounded-[2.5rem] p-6 md:p-8 space-y-6 shadow-xl h-full flex flex-col">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-4">
                                    <div class="size-10 rounded-xl bg-orange-500/10 flex items-center justify-center">
                                        <span class="material-symbols-outlined">brush</span>
                                    </div>
                                    <h3 class="text-lg font-bold text-gray-800 tracking-tight">
                                        Aray√ºz</h3>
                                </div>
                                <!-- Dark Mode Toggle Button -->
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" id="settings-dark-mode" class="sr-only peer">
                                    <div
                                        class="size-10 rounded-xl bg-gray-100 peer-checked:bg-indigo-600 flex items-center justify-center transition-all text-gray-400 peer-checked:text-white shadow-sm ring-1 ring-gray-900/5 peer-checked:ring-indigo-500">
                                        <span class="material-symbols-outlined text-lg">dark_mode</span>
                                    </div>
                                </label>
                            </div>

                            <div class="space-y-4 flex-1">
                                <p class="text-[10px] font-black text-gray-400 uppercase tracking-[0.2em]">
                                    Renk Temasƒ±</p>
                                <div class="grid grid-cols-2 gap-3">
                                    <!-- Purple Theme -->
                                    <button onclick="SettingsManager.setColorTheme('purple')" id="color-btn-purple"
                                        class="relative aspect-[16/9] rounded-2xl border-2 border-transparent hover:border-brand-300 transition-all duration-300 flex flex-col items-center justify-center gap-2 overflow-hidden bg-gray-50/50">
                                        <div class="size-5 rounded-full shadow-inner ring-4 ring-white"
                                            style="background-color: #9900F0;"></div>
                                        <span
                                            class="text-[9px] font-bold text-gray-500 uppercase tracking-tight">Mor</span>
                                    </button>
                                    <!-- Ocean Theme -->
                                    <button onclick="SettingsManager.setColorTheme('ocean')" id="color-btn-ocean"
                                        class="relative aspect-[16/9] rounded-2xl border-2 border-transparent hover:border-sky-300 transition-all duration-300 flex flex-col items-center justify-center gap-2 overflow-hidden bg-gray-50/50">
                                        <div class="size-5 rounded-full shadow-inner ring-4 ring-white"
                                            style="background-color: #0ea5e9;"></div>
                                        <span
                                            class="text-[9px] font-bold text-gray-500 uppercase tracking-tight">Okyanus</span>
                                    </button>
                                    <!-- Sunset Theme -->
                                    <button onclick="SettingsManager.setColorTheme('sunset')" id="color-btn-sunset"
                                        class="relative aspect-[16/9] rounded-2xl border-2 border-transparent hover:border-rose-300 transition-all duration-300 flex flex-col items-center justify-center gap-2 overflow-hidden bg-gray-50/50">
                                        <div class="size-5 rounded-full shadow-inner ring-4 ring-white"
                                            style="background-color: #f43f5e;"></div>
                                        <span class="text-[9px] font-bold text-gray-500 uppercase tracking-tight">G√ºn
                                            Batƒ±mƒ±</span>
                                    </button>
                                    <!-- Forest Theme -->
                                    <button onclick="SettingsManager.setColorTheme('forest')" id="color-btn-forest"
                                        class="relative aspect-[16/9] rounded-2xl border-2 border-transparent hover:border-emerald-300 transition-all duration-300 flex flex-col items-center justify-center gap-2 overflow-hidden bg-gray-50/50">
                                        <div class="size-5 rounded-full shadow-inner ring-4 ring-white"
                                            style="background-color: #10b981;"></div>
                                        <span
                                            class="text-[9px] font-bold text-gray-500 uppercase tracking-tight">Orman</span>
                                    </button>
                                </div>
                                <!-- Font Size Control Removed -->
                            </div>
                        </div>
                    </section>
                </div>

                <!-- Education -->
                <section>
                    <div class="glass-panel rounded-3xl overflow-hidden shadow-lg border border-blue-500/10">
                        <button onclick="toggleEducationZone()" id="education-zone-toggle"
                            class="w-full px-8 py-5 flex items-center justify-between text-gray-500 hover:bg-blue-50/50 transition-colors">
                            <div class="flex items-center gap-3">
                                <span class="material-symbols-outlined text-xl text-blue-500">school</span>
                                <span class="text-xs font-bold uppercase tracking-widest text-gray-400">Eƒüitim
                                    M√ºfredatƒ±</span>
                            </div>
                            <!-- Icon for toggle -->
                            <span class="material-symbols-outlined transition-transform duration-300"
                                id="education-zone-icon">keyboard_arrow_down</span>
                        </button>

                        <div id="education-zone-content" class="hidden border-t border-blue-500/10 bg-blue-50/10 p-8">
                            <div
                                class="bg-blue-50 rounded-[2rem] border-2 border-blue-200 p-6 md:p-8 flex flex-col md:flex-row items-center gap-6 md:gap-8 justify-between">

                                <!-- LEFT: Label -->
                                <div
                                    class="flex flex-col items-center md:items-start gap-4 text-center md:text-left md:w-1/4 shrink-0">
                                    <div class="flex items-center gap-3 text-blue-600 justify-center md:justify-start">
                                        <div
                                            class="size-8 rounded-full bg-blue-100 flex items-center justify-center shrink-0">
                                            <span class="material-symbols-outlined text-lg">info</span>
                                        </div>
                                        <h4 class="font-black text-sm leading-tight text-blue-700">
                                            Aktif olarak<br>√ßalƒ±≈ütƒ±ƒüƒ±n<br>√∂ƒürenme<br>yolunu se√ß.
                                        </h4>
                                    </div>

                                    <!-- Selector (Styled as part of left block or distinct) -->
                                    <div class="relative w-full">
                                        <select id="settings-course-select"
                                            class="w-full pl-4 pr-10 py-3 border-2 border-blue-200 bg-white rounded-xl text-gray-800 font-bold text-xs focus:border-blue-500 focus:outline-none appearance-none cursor-pointer shadow-sm hover:border-blue-300 transition-colors">
                                            <!-- Populated by JS -->
                                        </select>
                                        <div
                                            class="absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-blue-500 flex items-center">
                                            <span class="material-symbols-outlined text-sm">expand_more</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- SEPARATOR 1 -->
                                <div class="hidden md:flex transform text-blue-200 shrink-0">
                                    <div
                                        class="size-10 rounded-full bg-white border-2 border-blue-100 flex items-center justify-center shadow-sm">
                                        <span class="material-symbols-outlined text-blue-300">chevron_right</span>
                                    </div>
                                </div>

                                <!-- MIDDLE: Description -->
                                <div class="flex-1 w-full text-center md:text-left px-2">
                                    <p id="course-description-text"
                                        class="text-sm text-gray-600 font-medium leading-relaxed animate-fade-in">
                                        <!-- Dynamic Description -->
                                    </p>
                                    <p id="course-desc-placeholder" class="hidden text-sm text-gray-400 italic">
                                        L√ºtfen bir kurs se√ßin.
                                    </p>
                                </div>

                                <!-- SEPARATOR 2 -->
                                <div class="hidden md:flex transform text-blue-200 shrink-0">
                                    <div
                                        class="size-10 rounded-full bg-white border-2 border-blue-100 flex items-center justify-center shadow-sm">
                                        <span class="material-symbols-outlined text-blue-300">chevron_right</span>
                                    </div>
                                </div>

                                <!-- RIGHT: Fibonacci Info -->
                                <div
                                    class="flex flex-col items-center justify-center text-center gap-2 pt-4 md:pt-0 border-t-2 md:border-t-0 md:border-l-2 border-blue-100 md:pl-6 md:w-1/5 shrink-0">
                                    <p
                                        class="text-[10px] font-black text-blue-400 uppercase tracking-widest leading-loose">
                                        Fibonacci<br>SRS<br>Algoritmasƒ±<br>Optimize<br>Edilmektedir.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Admin/Teacher Optional -->
                <button id="settings-btn-admin"
                    class="hidden w-full bg-gray-900 text-white font-bold p-4 rounded-2xl flex items-center justify-center gap-2 hover:bg-black transition-colors">
                    <span class="material-symbols-outlined">admin_panel_settings</span> Y√∂netici
                    Paneli
                </button>

                <!-- Danger Zone -->
                <section>
                    <div class="glass-panel rounded-3xl overflow-hidden shadow-lg border border-red-500/10">
                        <button onclick="toggleDangerZone(event)" id="danger-zone-toggle"
                            class="w-full px-8 py-5 flex items-center justify-between text-gray-500 hover:bg-red-50/50 transition-colors">
                            <div class="flex items-center gap-3">
                                <span class="material-symbols-outlined text-xl text-red-400">security</span>
                                <span class="text-xs font-bold uppercase tracking-widest text-gray-400">Geli≈ümi≈ü
                                    & G√ºvenlik</span>
                            </div>
                            <!-- Icon for toggle -->
                            <span class="material-symbols-outlined transition-transform duration-300"
                                id="danger-zone-icon">keyboard_arrow_down</span>
                        </button>

                        <div id="danger-zone-content" class="hidden border-t border-red-500/10 bg-red-50/10 p-8">
                            <div class="bg-red-50 rounded-2xl p-4 border-2 border-red-200">
                                <div class="flex items-center gap-2 mb-3">
                                    <span class="material-symbols-outlined text-red-500">warning</span>
                                    <span class="text-sm font-black text-red-600">Dikkat! Bu i≈ülem geri alƒ±namaz.</span>
                                </div>
                                <p class="text-xs text-red-400 mb-4">
                                    Se√ßtiƒüiniz kursun t√ºm ilerleme verileri kalƒ±cƒ± olarak silinecektir.
                                </p>

                                <!-- Course Selection -->
                                <div class="mb-4">
                                    <label class="text-xs font-bold text-gray-600 mb-2 block">Sƒ±fƒ±rlanacak Kurs:</label>
                                    <select id="reset-course-select"
                                        class="w-full px-4 py-3 border-2 border-red-200 rounded-xl bg-white text-gray-800 font-semibold focus:border-red-500 focus:outline-none appearance-none">
                                        <option value="">-- Kurs Se√ßin --</option>
                                        <!-- Courses will be populated by JS -->
                                    </select>
                                </div>

                                <button type="button" onclick="showResetConfirmation()"
                                    class="w-full px-4 py-3 bg-red-500 text-white font-black rounded-xl hover:bg-red-600 transition-all shadow-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"
                                    id="reset-course-btn" disabled>
                                    <span class="material-symbols-outlined">delete_forever</span>
                                    SE√áƒ∞Lƒ∞ KURSU SIFIRLA
                                </button>

                                <!-- Download Backup Removed -->
                            </div>
                        </div>
                    </div>
            </div>
            </section>

            <footer class="w-full py-10 text-center">
                <div class="h-px w-20 bg-gradient-to-r from-transparent via-gray-300 to-transparent mx-auto mb-6">
                </div>
                <p class="text-[10px] font-black uppercase tracking-[0.5em] text-gray-400">
                    EnglishBus Advanced SRS ‚Ä¢ v2.4.1</p>
            </footer>
        </div>

    </div>

    <!-- Avatar Selection Modal -->
    <div id="avatar-modal"
        class="hidden fixed inset-0 z-[100] flex items-center justify-center bg-black/40 backdrop-blur-sm p-4">
        <div class="bg-white rounded-[2rem] shadow-2xl w-full max-w-md overflow-hidden animate-bounce-soft">
            <div class="p-6 border-b border-gray-100 flex justify-between items-center">
                <h3 class="font-black text-xl text-gray-800">Avatar Se√ß</h3>
                <button onclick="document.getElementById('avatar-modal').classList.add('hidden')"
                    class="size-8 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="p-6 grid grid-cols-5 gap-2" id="avatar-grid">
                <!-- JS Populates -->
            </div>
        </div>
    </div>

    <!-- Secure Reset Modal -->
    <div id="reset-modal"
        class="hidden fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4">
        <div
            class="bg-white rounded-[2rem] shadow-2xl w-full max-w-sm overflow-hidden animate-bounce-soft border-2 border-red-100">
            <div class="p-6 bg-red-50 border-b border-red-100 flex flex-col items-center text-center gap-3">
                <div
                    class="size-14 rounded-2xl bg-red-100 flex items-center justify-center text-red-500 mb-2 shadow-inner">
                    <span class="material-symbols-outlined text-3xl">warning</span>
                </div>
                <h3 class="font-black text-xl text-gray-800">Dikkat: Veri Silinecek!</h3>
                <p class="text-sm text-gray-500 font-medium leading-relaxed">
                    Aktif kurstaki <b class="text-gray-800">t√ºm ilerlemeniz</b> kalƒ±cƒ± olarak silinecek. Bu i≈ülem
                    geri alƒ±namaz.
                </p>
            </div>

            <div class="p-6 space-y-4">
                <div>
                    <label class="block text-xs font-bold text-gray-400 uppercase tracking-wider mb-2">Onay
                        ≈ûifresi</label>
                    <input type="password" id="reset-password-input" placeholder="Giri≈ü ≈üifrenizi yazƒ±n"
                        class="w-full px-4 py-3 bg-gray-50 border-2 border-gray-100 rounded-xl focus:border-red-500 focus:ring-4 focus:ring-red-100 outline-none font-bold text-gray-700 transition-all">
                </div>

                <div class="flex gap-3 pt-2">
                    <button onclick="document.getElementById('reset-modal').classList.add('hidden')"
                        class="flex-1 py-3 bg-gray-100 hover:bg-gray-200 text-gray-600 font-bold rounded-xl transition-colors">
                        Vazge√ß
                    </button>
                    <button onclick="SettingsManager.confirmSecureReset()"
                        class="flex-1 py-3 bg-red-500 hover:bg-red-600 text-white font-bold rounded-xl shadow-lg shadow-red-500/30 transition-all flex items-center justify-center gap-2">
                        <span class="material-symbols-outlined text-sm">delete_forever</span>
                        Sƒ±fƒ±rla
                    </button>
                </div>
            </div>
        </div>
    </div>


    </div>
    <div id="study-screen"
        class="screen hidden fixed inset-0 z-[60] bg-white/90 dark:bg-black/90 backdrop-blur-3xl flex flex-col supports-[backdrop-filter]:bg-white/80"
        style="--max-h: 87vh; --max-w: 90vw; --card-h: min(var(--max-h), calc(var(--max-w) * 1.618)); --card-w: calc(var(--card-h) / 1.618); --final-w: var(--card-w);">

        <!-- 1. Header Area (8% Height) -->
        <div class="h-[8vh] flex items-end justify-center pb-1">
            <!-- Header Content Limited to Card Width -->
            <div style="width: var(--final-w);" class="flex flex-col gap-1">
                <!-- Row 1: Back Button -->
                <button onclick="exitStudy()" aria-label="Kapat"
                    class="group flex items-center gap-1 text-gray-500 hover:text-gray-900 transition-colors self-start py-0.5">
                    <span
                        class="material-symbols-outlined text-xl group-hover:-translate-x-1 transition-transform">arrow_back</span>
                    <span
                        class="text-[10px] font-bold uppercase tracking-widest opacity-0 group-hover:opacity-100 transition-opacity">√áƒ±kƒ±≈ü</span>
                </button>

                <!-- Row 2: Progress Bar (Full Width) -->
                <div id="study-progress-container" class="w-full flex items-center gap-2">
                    <div class="flex-1 h-1.5 bg-gray-200 rounded-full overflow-hidden">
                        <div id="unit-progress-bar" class="h-full bg-gray-800 rounded-full transition-all duration-500"
                            style="width: 0%">
                        </div>
                    </div>
                    <span class="text-[9px] font-bold text-gray-400 font-mono w-8 text-right"><span
                            id="unit-new-words">0</span>/50</span>
                </div>
            </div>
        </div>

        <!-- 2. Main Content Area (89% Height = 1% Top + 87% Card + 1% Bottom) -->
        <div class="h-[89vh] flex flex-col items-center justify-center relative">

            <!-- The Flashcard -->
            <!-- Dimensions enforced by CSS Variables -->
            <div id="study-card-container" style="width: var(--final-w); height: var(--card-h);"
                class="glass-stich rounded-[1.5rem] border border-gray-900/10 shadow-2xl shadow-brand-900/10 relative flex flex-col overflow-hidden bg-white/80 backdrop-blur-xl transition-all duration-500 hover:shadow-brand-900/20 group shrink-0">

                <!-- Decorative Blobs (Internal) -->
                <div
                    class="absolute -top-[20%] -right-[20%] w-[50%] h-[30%] bg-brand-100 rounded-full blur-3xl opacity-50">
                </div>
                <div
                    class="absolute -bottom-[20%] -left-[20%] w-[50%] h-[30%] bg-accent-100 rounded-full blur-3xl opacity-50">
                </div>

                <!-- Image / Visual Area (Flexible Height) -->
                <div id="card-image-container"
                    class="flex-1 relative cursor-pointer flex items-start justify-center p-5 transition-colors hover:bg-white/50 min-h-0"
                    onclick="playCardAudio()">
                    <img id="card-image" src="" alt=""
                        class="max-w-full max-h-full w-full object-contain rounded-xl drop-shadow-xl transition-transform duration-500 group-hover:scale-105 z-10">

                    <!-- Minimal Audio Icon
                    <div
                        class="absolute bottom-4 right-4 text-gray-400 opacity-50 group-hover:opacity-100 transition-opacity z-20 bg-white/50 p-1.5 rounded-full backdrop-blur-sm">
                        <span class="material-symbols-outlined text-lg">volume_up</span>
                    </div>
                    -->
                </div>

                <!-- Text & Interaction Area -->
                <div id="card-content-area" class="relative z-10 px-5 pb-6 pt-1 text-center flex flex-col gap-3">
                    <div id="card-text-wrapper"
                        class="space-y-0.5 flex-1 flex flex-col justify-center cursor-pointer hover:opacity-80 transition-opacity"
                        onclick="playCardAudio()">
                        <p id="card-top-text"
                            class="text-[9px] font-bold text-gray-400 tracking-[0.2em] uppercase opacity-0 transition-opacity duration-300">
                            Word</p>
                        <h2 id="card-main-text"
                            class="text-3xl md:text-4xl font-black text-gray-800 tracking-tight leading-none min-h-[1.1em]">
                            Word
                        </h2>
                        <p id="card-sub-text" class="text-sm text-gray-500 font-medium hidden">
                        </p>
                    </div>

                    <!-- Action Button -->
                    <button id="card-action-btn" onclick="handleCardAction()"
                        class="w-full h-14 bg-gray-900 hover:bg-black text-white rounded-xl font-bold text-base shadow-lg hover:shadow-xl hover:-translate-y-0.5 active:scale-95 transition-all flex items-center justify-center gap-2 group/btn relative overflow-hidden shrink-0">
                        <span class="relative z-10">G√ñSTER</span>
                        <div
                            class="absolute inset-0 bg-gradient-to-r from-brand-500 to-accent-500 opacity-0 group-hover/btn:opacity-100 transition-opacity duration-500">
                        </div>
                    </button>
                </div>
            </div>

            <!-- Feedback Dots (Positioned in the remaining space of the 85% block) -->
            <div id="card-dots" class="absolute bottom-4 flex gap-2 opacity-0 h-2"></div>
        </div>

        <!-- 3. Footer Area (3% Height) -->
        <div class="h-[3vh]"></div>

    </div>

    <!-- Modals / Overlays -->
    <!-- Messages Modal -->
    <div id="messages-panel"
        class="hidden fixed inset-0 z-[70] flex items-center justify-center bg-black/40 backdrop-blur-sm p-4">
        <!-- Content handled by JS -->
    </div>

    <!-- Confirmation Modal -->
    <div id="confirmation-modal"
        class="screen hidden fixed inset-0 z-[80] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4">
        <div class="bg-white rounded-3xl p-6 w-full max-w-xs shadow-2xl animate-bounce-soft">
            <h3 id="modal-title" class="text-xl font-black text-gray-800 mb-2">Ba≈ülƒ±k</h3>
            <p id="modal-message" class="text-gray-500 font-medium mb-6">Mesaj i√ßeriƒüi burada
                yer alacak.</p>
            <div class="flex gap-3">
                <button onclick="Modal.hide()"
                    class="flex-1 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 font-bold rounded-xl transition-colors">Vazge√ß</button>
                <button id="btn-modal-confirm"
                    class="flex-1 py-3 bg-red-500 hover:bg-red-600 text-white font-bold rounded-xl transition-colors">Evet</button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay"
        class="hidden fixed inset-0 z-[90] flex flex-col items-center justify-center bg-black/70 backdrop-blur-sm transition-opacity duration-300">
        <div class="bg-white p-4 rounded-full shadow-2xl mb-4 animate-spin">
            <span class="material-symbols-outlined text-4xl text-brand-500">sync</span>
        </div>
        <h3 class="text-white font-bold text-lg tracking-widest animate-pulse">Y√úKLENƒ∞YOR...</h3>
        <p class="text-white/60 text-xs font-medium mt-2">C√ºmleler hazƒ±rlanƒ±yor</p>
    </div>

    <!-- Mobile Bottom Navigation Removed -->

    </div>

    <!-- LOGIC -->
    <!-- CORE LOGIC & PLUGINS -->
    <!-- Logic moved to js/app.js, js/messages.js, js/ui_helpers.js -->

    <script type="module" src="js/settings.js"></script>
    <script type="module" src="js/app.js"></script>
</body>

</html>