buraya proje planÄ±nÄ± yazacaÄŸÄ±m. ama bunu dÃ¼ze yazÄ± ve kod arasÄ± bir mantÄ±kla yapmaya Ã§alÄ±ÅŸacaÄŸÄ±m. umarÄ±m baÅŸarÄ±lÄ± olabiliriz.
----------------------
----------------------
FIBONACCI DÄ°ZÄ°SÄ° (GLOBAL TANIM - TÃœM BELGE Ä°Ã‡Ä°N GEÃ‡ERLÄ°DÄ°R)

    Fibonacci Dizisi (1-indexed): 1, 1, 2, 3, 5, 8, 13, 21, 34, 55...
    
    Index Tablosu:
    Fibonacci[1] = 1
    Fibonacci[2] = 1
    Fibonacci[3] = 2
    Fibonacci[4] = 3
    Fibonacci[5] = 5
    Fibonacci[6] = 8
    Fibonacci[7] = 13
    ...
    
    Bu tanÄ±m belgenin tamamÄ±nda kullanÄ±lÄ±r.
    Tekrar aralÄ±klarÄ± bu diziye gÃ¶re hesaplanÄ±r.
    
    Ã–NEMLÄ° NOT:
    Fibonacci deÄŸeri = Sonraki gÃ¶sterim ile arasÄ±ndaki ADIM sayÄ±sÄ±dÄ±r.
    Formul: Next_Step = Current_Step + Fibonacci(Level)
    
    Ã–ZEL DURUM - repetition_count = 0:
    Yeni kelimeler (hiÃ§ gÃ¶rÃ¼lmemiÅŸ) iÃ§in Fibonacci hesabÄ± YAPILMAZ.
    Ä°lk tekrar, kelime ilk kez gÃ¶rÃ¼ldÃ¼kten sonra repetition_count = 1 olduÄŸunda baÅŸlar.
    Bu durumda: Next_Step = Current_Step + Fibonacci[1] = Current_Step + 1
    
    GÃ¶rsel DoÄŸrulama:
    AdÄ±m 1 Ã¶ÄŸrenildi (rep=1) â†’ Next = 1 + 1 = 2 âœ“
    AdÄ±m 2 tekrar (rep=2) â†’ Next = 2 + 1 = 3 âœ“
    AdÄ±m 3 tekrar (rep=3) â†’ Next = 3 + 2 = 5 âœ“
----------------------
----------------------
----------------------
Sistemin Ã§alÄ±ÅŸma mantÄ±ÄŸÄ±nÄ± tarif ediyorum: 
Sistem, zamana dayalÄ± (tarih/saat) deÄŸil, "AdÄ±m TabanlÄ±" (Step-Based) bir AralÄ±klÄ± Tekrar (Spaced Repetition) algoritmasÄ± kullanacaktÄ±r.

    1. Temel Kavramlar:
        AdÄ±m (Step/Bucket): Exceldeki satÄ±r numarasÄ± gibidir. KullanÄ±cÄ± bir "AdÄ±m" iÃ§indeyken, o adÄ±ma denk gelen tÃ¼m kartlarÄ± (yeni veya tekrar) bitirmeden bir sonraki adÄ±ma (satÄ±ra) geÃ§emez.
        YÄ±ÄŸÄ±n (Stacking): Bir adÄ±mda birden fazla kart birikebilir. KullanÄ±cÄ± o adÄ±mdaki kartlarÄ± sÄ±rayla gÃ¶rÃ¼r.
        Kart (Card): Ã–ÄŸrenilecek kelime.

    2. Algoritma KurallarÄ±: Sistem iki ana kurala gÃ¶re Ã§alÄ±ÅŸÄ±r: GiriÅŸ KuralÄ± ve Tekrar KuralÄ±.

        A. Yeni Kelime GiriÅŸ KuralÄ± (The 1-4-7-10 Rule): Sisteme yeni kelimeler (New Words) sadece belirli adÄ±mlarda girer.
            FormÃ¼l: (Mevcut AdÄ±m - 1) % 3 == 0 ise yeni kelime Ã§ekilir.
            MantÄ±k: 1, 4, 7, 10, 13, 16... adÄ±mlarÄ±nda desteye veritabanÄ±ndan sÄ±radaki "Yeni Kelime" eklenir.
            Ara adÄ±mlarda (2, 3, 5, 6, 8, 9...) yeni kelime alÄ±nmaz, sadece varsa tekrarlar yapÄ±lÄ±r.

        B. Tekrar KuralÄ± (Fibonacci Gaps): KullanÄ±cÄ± bir kartÄ± tamamladÄ±ÄŸÄ±nda, o kelime bir sonraki gÃ¶sterim iÃ§in ileri bir adÄ±ma fÄ±rlatÄ±lÄ±r. FÄ±rlatma mesafesi (Gap) yukarÄ±da tanÄ±mlanan Fibonacci dizisine gÃ¶re belirlenir.
            Hesaplama: Hedef AdÄ±m = Mevcut AdÄ±m + Fibonacci(Seviye)
            Ã–rnek: KullanÄ±cÄ± 11. adÄ±mda bir kelimeyi 3. seviyede tamamladÄ± (Fibonacci[3] = 2). Hedef = 11 + 2 = 13. Bu kelime 13. adÄ±ma rezerve edilir.
            
            NOT: Tekrar hesaplamasÄ± yalnÄ±zca bu bÃ¶lÃ¼mde tanÄ±mlanan formÃ¼le gÃ¶re yapÄ±lÄ±r.
    3. Oturum AkÄ±ÅŸÄ± (Session Flow - Pseudo Code): YazÄ±lÄ±mcÄ± veya AI, backend tarafÄ±nda ÅŸu mantÄ±ÄŸÄ± kurmalÄ±dÄ±r:
 
        # Python ile KODLAMA MANTIÄI Ä°Ã‡Ä°N REFERANS (Pseudo-Code)
        # active_course_id her zaman Users tablosundan alÄ±nÄ±r ve parametre olarak geÃ§ilir.
        # Fonksiyon adÄ±: get_step_content (tÃ¼m belgede aynÄ±)

            def get_step_content(user_id, active_course_id, skip_count=0):
                # skip_count: BoÅŸ adÄ±m atlama sayÄ±sÄ± (recursive Ã§aÄŸrÄ±larda artÄ±rÄ±lÄ±r)
                
                current_step = db.get_user_step(user_id, active_course_id) # Kurs bazlÄ± step
                bucket_content = []

                # KURAL 1: Yeni Kelime KontrolÃ¼
                if (current_step - 1) % 3 == 0:
                    new_word = Database.get_next_new_word(user_id, active_course_id)
                    bucket_content.append(new_word)

                # KURAL 2: Tekrar Kelimelerini Topla
                # VeritabanÄ±nda "next_review_step" deÄŸeri "current_step" olanlarÄ± getir.
                # Ã–NEMLÄ°: Sadece aktif kursun kelimelerini getir (kurs karÄ±ÅŸmasÄ±nÄ± Ã¶nlemek iÃ§in)
                reviews = Database.query(
                    """SELECT * FROM Progress 
                       WHERE next_review_step = ? 
                       AND user_id = ?
                       AND word_id IN (SELECT id FROM Words WHERE course_id = active_course_id)""",
                    current_step, user_id
                )
                bucket_content.extend(reviews)

                # KURAL 3: Sepet KontrolÃ¼
                if bucket_content is not empty:
                    return bucket_content # KullanÄ±cÄ±ya bu kartlarÄ± gÃ¶ster
                    # Ã‡alÄ±ÅŸma MantÄ±ÄŸÄ±:
                    # skip_count fonksiyon parametresi olarak taÅŸÄ±nÄ±r
                    # Her recursive Ã§aÄŸrÄ±da artÄ±rÄ±lÄ±r
                    # Alternatif: while loop ile iterative yapÄ±labilir
                    
                    if skip_count > 200:
                        return "Bu kursta ÅŸu an bekleyen kart yok" # Recursion limit
                    
                    db.increment_user_step(user_id, active_course_id)
                    return get_step_content(user_id, active_course_id, skip_count + 1)

----------------------
----------------------
ÅŸimdi sistemin veritabanÄ± yapÄ±sÄ±nÄ± tarif ediyorum:
    veritabanÄ±nda ÅŸunlar
        Kurs bilgileri (Courses)
            Kurs adÄ± (A1, A2, 5. sÄ±nÄ±f, 6. sÄ±nÄ±f vs)
            Kurs id (otomatik artan ID, veya UUID)
            Kurs kelimeleri (her kursa ait toplam kelime sayÄ±sÄ± )
            owner_user_id (NULL = sistem kursu, user_id = kullanÄ±cÄ± kursu)
            order_number (sÄ±ralama iÃ§in)
        Ãœnite bilgileri
            Ãœnite adÄ± (A1.1 A2.4 grade5-tema adÄ±  vs)
            Ãœnite id (otomatik artan ID, veya UUID)
            Ãœnite kelimeleri (kelime listesi olacak)
            Ãœnite kelime sayÄ±sÄ± (her Ã¼nitede 50 kelime olacak)
        Kelime bilgileri
            Kelime id (otomatik artan ID, veya UUID)
            Kelime ingilizce kelimesi
            Kelime TÃ¼rkÃ§e anlamlÄ±sÄ±
            Kelime sesi
            Kelime resmi (URL - yapay zeka ile Ã¶nceden Ã¼retilip yÃ¼klenecek veya stok API kullanÄ±lacak)
        KullanÄ±cÄ± bilgileri (Users)
            KullanÄ±cÄ± id (otomatik artan ID, veya UUID)
            KullanÄ±cÄ± adÄ±
            KullanÄ±cÄ± soyadÄ±
            KullanÄ±cÄ± e-posta
            KullanÄ±cÄ± ÅŸifre
            KullanÄ±cÄ± aktif kurs (active_course_id) - ÅŸu an Ã§alÄ±ÅŸtÄ±ÄŸÄ± kurs
                
                NOT: Users.current_step KALDIRILDI!
                Her kurs iÃ§in ayrÄ± current_step UserCourseProgress'te tutulur.
                
         KullanÄ±cÄ± Kurs Ä°lerlemesi (UserCourseProgress) - Ã‡OK KURSLU SÄ°STEM
                    user_id (hangi kullanÄ±cÄ±)
                    course_id (hangi kurs)
                    current_step (o kursta nerede)
                    last_activity (en son ne zaman Ã§alÄ±ÅŸtÄ± - opsiyonel)
                    
                    PRIMARY KEY: (user_id, course_id)
                    
                    Ã‡alÄ±ÅŸma MantÄ±ÄŸÄ±:
                        - KullanÄ±cÄ± A1'e Ã§alÄ±ÅŸÄ±rsa â†’ A1'in current_step'i gÃ¼ncellenir
                        - A2'ye geÃ§erse â†’ A2'nin current_step'i okunur
                        - HiÃ§ Ã§alÄ±ÅŸmamÄ±ÅŸsa â†’ current_step = 1 (default)
                    
                    Bu sayede:
                        âœ… Her kurs ayrÄ± takip edilir
                        âœ… Kurs deÄŸiÅŸiminde veri kaybÄ± YOK
                        âœ… %100 doÄŸruluk garantisi
                    
         KullanÄ±cÄ± ilerleyiÅŸ bilgileri (Progress - Sistemin Kalbi)
                    Progress id (otomatik artan ID)
                    user_id (hangi kullanÄ±cÄ±)
                    word_id (hangi kelime)
                    repetition_count (kaÃ§ kez tekrar edildi - Fibonacci seviyesi)
                    next_review_step (bir sonraki tekrarÄ±n yapÄ±lacaÄŸÄ± adÄ±m numarasÄ±)
                    
                    Ã–NEMLÄ°: "status" alanÄ± YOKTUR. TÃ¼m kelimeler sÃ¼rekli tekrar edilir.
                    repetition_count = 0 â†’ Yeni kelime (hiÃ§ gÃ¶rÃ¼lmemiÅŸ)
                    repetition_count > 0 â†’ Tekrar ediliyor (seviye sayÄ±sÄ± kadar)
                    
                    KRÄ°TÄ°K GÃœVENLÄ°K NOTU:
                    Progress tablosunda course_id alanÄ± YOK (denormalize edilmedi).
                    Kurs izolasyonu word_id â†’ Words.course_id iliÅŸkisiyle saÄŸlanÄ±r.
                    
                    Mimari Not:
                    Bu MVP'de bilinÃ§li olarak course_id denormalize edilmemiÅŸtir.
                    Ä°leri aÅŸamalarda performans veya gÃ¼venlik gerekirse,
                    Progress'e redundant course_id alanÄ± eklenebilir.
                    
                    ZORUNLU: Her Progress query'sinde ÅŸu filtre MUTLAKA olmalÄ±:
                    AND word_id IN (SELECT id FROM Words WHERE course_id = active_course_id)
                    
                    Bu filtre unutulursa kurslar karÄ±ÅŸÄ±r!
       bulunacak
----------------------
----------------------
Veri tabanÄ± iÅŸleyiÅŸi ÅŸu ÅŸekilde olmalÄ±.
    

    0. TEMEL FELSEFE

        Bu sistem:
        ZAMAN (date, time, clock) KULLANMAZ
        Ã–ÄŸrenmeyi "ADIM (STEP)" Ã¼zerinden takip eder
        TekrarlarÄ± Fibonacci dizisine gÃ¶re planlar
        KullanÄ±cÄ± hÄ±zÄ±na kendiliÄŸinden uyum saÄŸlar
        
        AmaÃ§:
        Ã–ÄŸrenme baskÄ±sÄ±nÄ± azaltmak
        Motivasyonu korumak
        Deterministik, test edilebilir ve sade bir sistem kurmak

    1. MANTIKSAL HÄ°YERARÅÄ° (KULLANICIYA GÃ–RÃœNEN YAPI)

        Sistem, iÃ§erikleri ÅŸu mantÄ±ksal hiyerarÅŸiyle ele alÄ±r:
        
            Course (Kurs)
            â””â”€â”€ Unit (Ãœnite)
                â””â”€â”€ Word (Kelime)
        
        KullanÄ±cÄ± arayÃ¼zÃ¼nde ve iÅŸ mantÄ±ÄŸÄ±nda kelimeler
        "MantÄ±ksal Adresleme" ile temsil edilir:
        
            course.unit.word >1.1.14
        
        Ã–NEMLÄ°:
        Bu adresler VERÄ°TABANINDA string olarak tutulmaz
        Bunlar; order_number alanlarÄ±ndan TÃœRETÄ°LÄ°R

    2. VERÄ°TABANI GERÃ‡EKLÄ°ÄÄ° vs MANTIKSAL ADRES

        VeritabanÄ±nda her tablo klasik IDâ€™ler kullanÄ±r:
    
            course_id, unit_id, word_id >1, 2, 3, ...
    
        MantÄ±ksal adresleme ise ÅŸu alanlardan hesaplanÄ±r:
    
            course.order_number
            unit.order_number
            word.order_number
    
        UI veya raporlama katmanÄ±nda:
    
            logical_address = f"{course.order}.{unit.order}.{word.order}"
    
        Bu ayrÄ±m:
            PerformansÄ± korur
            Reorder ve migration sorunlarÄ±nÄ± Ã¶nler
            Sistemi Ã¶lÃ§eklenebilir yapar

    3. KURSLAR (COURSES)
        Sistem iki tÃ¼r kurs barÄ±ndÄ±rÄ±r:
        1. Sistem KurslarÄ± (Ã–rn: A1, A2, B1...)
        2. KullanÄ±cÄ±ya Ait Ã–zel Kurslar
            Sistem KurslarÄ±:
                owner_user_id = NULL
                order_number = 1, 2, 3, ...
            KullanÄ±cÄ± KurslarÄ± (Ã–zel):
                owner_user_id = kullanÄ±cÄ±ya ait
                order_number = 0(MantÄ±ksal olarak "Kurs 0")
        Bu sayede:
            Her kullanÄ±cÄ±nÄ±n kendi kelime alanÄ± izole edilir
            Sistem kurslarÄ±yla Ã§akÄ±ÅŸma olmaz

    4. ÃœNÄ°TELER (UNITS)
        Her kurs birden fazla Ã¼nite iÃ§erir.
        Ãœniteler sÄ±rayla numaralandÄ±rÄ±lÄ±r:
        
            1.1, 1.2, 1.3 ...
    
        KullanÄ±cÄ± kurslarÄ± iÃ§in Ã¶zel kural:
    
        ÃœNÄ°TE BOYUTU PARAMETRESÄ°:
            WORDS_PER_UNIT = 50 (varsayÄ±lan)
            
            Bu parametre deÄŸiÅŸtirilebilir (Ã¶rn: 40, 60)
            Sistem otomatik olarak yeniden Ã¼nitelere bÃ¶ler
        
        Otomatik Ãœniteleme:
            Her WORDS_PER_UNIT kelimede bir otomatik yeni Ã¼nite aÃ§Ä±lÄ±r
        
        Ã–rnek (WORDS_PER_UNIT = 50):
            1â€“50 kelime â†’ Ãœnite 0.1
            51â€“100 kelime â†’ Ãœnite 0.2
            101â€“150 kelime â†’ Ãœnite 0.3
            ...
    
        Maksimum:
            20 Ã¼nite x 50 kelime = 1000 kelime
            
        NOT: Admin Ã¼niteleri ELLE OLUÅTURMAZ!
        Sadece sÄ±ralÄ± kelime listesi verir, sistem otomatik bÃ¶ler.

    5. ÃœNÄ°TE KÄ°LÄ°TLEME SÄ°STEMÄ° (PROGRESSION GATING)
    
        Bu sistem, kullanÄ±cÄ±nÄ±n rastgele Ã¼nitelere atlamasÄ±nÄ± Ã¶nler ve
        linear (sÄ±ralÄ±) Ã¶ÄŸrenmeyi teÅŸvik eder.
        
        Ã–NEMLÄ°: Bu bir ERÄ°ÅÄ°M KURALI'dÄ±r, Ã§ekirdek algoritmaya DOKUNMAZ.
        
        TEMEL KURAL:
            Bir kursta kullanÄ±cÄ± aynÄ± anda EN FAZLA 2 Ã¼niteye eriÅŸebilir:
            - Aktif Ã¼nite (Ã§alÄ±ÅŸÄ±lan)
            - Bir sonraki Ã¼nite (koÅŸullu)
        
        ÃœNÄ°TE DURUMLARI (3 Durum):
        
            LOCKED (Kilitli):
                - HenÃ¼z eriÅŸilemez
                - UI'da kilit ikonu ile gÃ¶sterilir
                - TÄ±klanamaz
            
            PREVIEW (Ã–nizleme):
                - GÃ¶rebilir ama Ã§alÄ±ÅŸamaz
                - "YakÄ±nda" etiketi vardÄ±r
                - Motivasyon saÄŸlar
            
            OPEN (AÃ§Ä±k):
                - Tam eriÅŸilebilir
                - Ã‡alÄ±ÅŸÄ±labilir
        
        UNLOCK KURALLARI:
        
            Ä°lk Ãœnite (Ã¶rn: A1.1):
                â†’ Her zaman OPEN
            
            Ä°kinci Ãœnite (Ã¶rn: A1.2) â†’ PREVIEW olmasÄ± iÃ§in:
                Aktif Ã¼nitedeki kelimelerin %50'si
                repetition_count >= 1 olmalÄ±
                
                Hesaplama:
                seen_count = COUNT(rep_count > 0) FROM aktif Ã¼nite
                if seen_count >= WORDS_PER_UNIT * 0.5:
                    â†’ PREVIEW aÃ§Ä±lÄ±r
            
            Bir Ãœnitenin TAM AÃ‡ILMASI â†’ OPEN olmasÄ± iÃ§in:
                Ã–nceki Ã¼nitedeki TÃœM kelimeler
                repetition_count >= 7 olmalÄ±
                
                Hesaplama:
                mastered_count = COUNT(rep_count >= 7) FROM Ã¶nceki Ã¼nite
                if mastered_count == WORDS_PER_UNIT:
                    â†’ OPEN olur
        
        Ã–RNEK SENARYO:
        
            KullanÄ±cÄ± A1 kursuna baÅŸladÄ±:
            
            BaÅŸlangÄ±Ã§:
                A1.1 â†’ OPEN (varsayÄ±lan)
                A1.2 â†’ LOCKED
                A1.3 â†’ LOCKED
            
            A1.1'de 25 kelime gÃ¶rÃ¼ldÃ¼ (rep_count >= 1):
                A1.1 â†’ OPEN
                A1.2 â†’ PREVIEW (gÃ¶rebilir ama Ã§alÄ±ÅŸamaz)
                A1.3 â†’ LOCKED
            
            A1.1'in 50 kelimesi de rep_count >= 7 oldu:
                A1.1 â†’ OPEN (hala Ã§alÄ±ÅŸÄ±labilir)
                A1.2 â†’ OPEN (artÄ±k Ã§alÄ±ÅŸÄ±labilir!)
                A1.3 â†’ LOCKED (A1.2 iÃ§in aynÄ± kural bekliyor)
        
        BACKEND FONKSÄ°YON (Pseudo-Code):
        
            def get_unit_states(user_id, course_id):
                """
                KullanÄ±cÄ± iÃ§in tÃ¼m Ã¼nitelerin durumunu hesaplar
                """
                active_unit = get_active_unit(user_id, course_id)
                units = get_units(course_id)
                states = {}
                
                for unit in units:
                    if unit.order_number == 1:
                        # Ä°lk Ã¼nite her zaman aÃ§Ä±k
                        states[unit.id] = "OPEN"
                    
                    elif unit.order_number == active_unit.order_number:
                        # Aktif Ã¼nite aÃ§Ä±k
                        states[unit.id] = "OPEN"
                    
                    elif unit.order_number == active_unit.order_number + 1:
                        # Bir sonraki Ã¼nite koÅŸullu
                        seen_count = count_seen_words(user_id, active_unit.id)
                        
                        if seen_count >= WORDS_PER_UNIT * 0.5:
                            # Ã–nceki Ã¼nite tamamlanmÄ±ÅŸ mÄ±?
                            prev_unit = get_unit(course_id, unit.order_number - 1)
                            mastered = count_mastered_words(user_id, prev_unit.id, min_rep=7)
                            
                            if mastered == WORDS_PER_UNIT:
                                states[unit.id] = "OPEN"
                            else:
                                states[unit.id] = "PREVIEW"
                        else:
                            states[unit.id] = "LOCKED"
                    
                    else:
                        # DiÄŸer tÃ¼m Ã¼niteler kilitli
                        states[unit.id] = "LOCKED"
                
                return states
        
        Ã–NEMLÄ° NOTLAR:
        
            1. Bu sistem step algoritmasÄ±na DOKUNMAZ
               - Kelimeler yine step bazlÄ± gelir
               - Fibonacci aynÄ± Ã§alÄ±ÅŸÄ±r
               - Sadece ERÄ°ÅÄ°M kontrolÃ¼ yapar
            
            2. PREVIEW durumunda kullanÄ±cÄ±:
               - Ãœniteyi gÃ¶rebilir
               - Kelimeleri listeleyebilir
               - AMA Ã§alÄ±ÅŸamaz (buton disable)
            
            3. Aktif Ã¼nite hesaplama:
               - KullanÄ±cÄ±nÄ±n en son gÃ¶rdÃ¼ÄŸÃ¼ kelimenin Ã¼nitesi
               - UserCourseProgress.current_step'ten tÃ¼retilebilir

    6. KELÄ°MELER (WORDS)
        Her kelime:
            Sadece bir Ã¼niteye aittir
            Ãœnite iÃ§inde sÄ±ralÄ±dÄ±r
            Kelimenin mantÄ±ksal adresi:
            course.order
            unit.order
            word.order
        
        Ã–rnek:
        2.1.1> 2. kurs, 1. Ã¼nite, 1. kelime

    6. KULLANICILAR (USERS)
        Her kullanÄ±cÄ±:
            Benzersiz bir kullanÄ±cÄ± IDâ€™ye sahiptir
            Sistem iÃ§inde ilerleyiÅŸi tamamen baÄŸÄ±msÄ±zdÄ±r
    
        MantÄ±ksal anlatÄ±mda:
            K1, K2, K3 ...
    
        Teknikte:
            user_id = UUID veya auto increment ID

    7. KULLANICI Ä°LERLEYÄ°Å FELSEFESÄ° (KRÄ°TÄ°K)
        KullanÄ±cÄ± ilerleyiÅŸi:
            "Son kaldÄ±ÄŸÄ± kelime" ile deÄŸil
            "Mevcut AdÄ±m (current_step)" ile takip edilir
    
        Ã‡Ã¼nkÃ¼:
            Sistem geri dÃ¶nÃ¼ÅŸlÃ¼ tekrarlar iÃ§erir
            Fibonacci tekrarlarÄ± vardÄ±r
    
        Bu nedenle:
            Zaman bazlÄ± takip YAPILMAZ
            Date / time / cron KULLANILMAZ

    8. ADIM (STEP) MANTIÄI

        Step = Ã–ÄŸrenme zamanÄ±nÄ±n yerini tutan soyut sayaÃ§
        
        KullanÄ±cÄ± bir kursa baÅŸladÄ±ÄŸÄ±nda:
            current_step = 1
        
        Her oturumda:
            KullanÄ±cÄ±ya bir "kart seti" gÃ¶sterilir
        TÃ¼m kartlar tamamlanÄ±nca:
        
        current_step += 1

    9. OTURUMDA GÃ–STERÄ°LECEK KARTLAR

        Bir adÄ±mda kullanÄ±cÄ±ya gÃ¶sterilen kartlar:
            1. YENÄ° KELÄ°ME (opsiyonel)
            2. TEKRAR KELÄ°MELERÄ° (0 veya daha fazla)
        
        YENÄ° KELÄ°ME KURALI:
            Yeni kelime sadece ÅŸu adÄ±mlarda eklenir:
                1, 4, 7, 10, 13, ...
        
        Matematiksel ifade:
            if (current_step - 1) % 3 == 0:
                yeni kelime ekle

    10. TEKRAR (REVIEW) MANTIÄI
        Her kelime iÃ§in sistem ÅŸunlarÄ± tutar:
            repetition_count (kaÃ§ kez tekrar edildi)
            next_review_step (bir sonraki tekrarÄ±n yapÄ±lacaÄŸÄ± adÄ±m)
        Tekrar aralÄ±klarÄ± yukarÄ±da tanÄ±mlanan Fibonacci dizisine gÃ¶re hesaplanÄ±r.
    
        Ã–rnek:
            kelime level = 3
            fibonacci(3) = 2
            next_review_step = current_step + 2
        
        NOT: Fibonacci sonsuz devam eder, kelime HIÃ‡ sistemden Ã§Ä±kmaz.

    11. BOÅ ADIMLARIN OTOMATÄ°K ATLANMASI
        EÄŸer bir adÄ±mda:
            Yeni kelime yok
            Tekrar kelimesi yok
        Sistem kullanÄ±cÄ±yÄ± BEKLETMEZ.
    
        Otomatik olarak:
            current_step += 1
            tekrar kontrol eder
    
    Bu iÅŸlem:
        KullanÄ±cÄ±yÄ± "boÅŸ oturum" yaÅŸamaktan korur
        AkÄ±ÅŸÄ± kesintisiz tutar

    12. Ä°LERLEYÄ°Å TABLOSU (PROGRESS)

        Progress tablosu sistemin KALBÄ°DÄ°R.
        
        Bu tabloda:
        ZAMAN YOK
        TARÄ°H YOK
        
        SADECE:
        
        user_id
        word_id
        repetition_count
        next_review_step
        
    TÃ¼m raporlar bu verilerden TÃœRETÄ°LÄ°R.

    13. "HÄ°Ã‡ KELÄ°ME BÄ°TMEZ" FELSEFESÄ° (KRÄ°TÄ°K)

        Bu sistemde "MASTERED" (tamamlandÄ±) durumu YOKTUR.
        
        Temel Felsefe:
            HER KELÄ°ME SONSUZ TEKRAR EDÄ°LÄ°R
            Fibonacci aralÄ±klarÄ± sonsuz devam eder
            "KalÄ±cÄ±lÄ±k = Az da olsa sÃ¼rekli tekrar" mantÄ±ÄŸÄ±
        
        Neden?
            Unutma doÄŸaldÄ±r
            Ã‡ok uzun aralarda bile tek tekrar Ã§ok deÄŸerlidir
            Kelime HIÃ‡ sistemden Ã§Ä±kmaz
        
        Ã–rnek:
            KullanÄ±cÄ± 21. Ã¼nitede Ã§alÄ±ÅŸÄ±yor (AdÄ±m 5000)
            2. Ã¼niteden bir kelime:
                repetition_count = 23
                next_review_step = 5000 + Fibonacci[23] + 1 = 5000 + 28657 + 1 = 33658
            Bu kelime 33658. adÄ±mda YÄ°NE GELECEK!
        
        Fibonacci SÄ±nÄ±rÄ±:
            SINIR YOK
            Fibonacci[100] bile olabilir
            Sonsuz bÃ¼yÃ¼me kabul edilir

    14. Ä°LERLEME METRÄ°KLERÄ° (UI Ä°Ã‡Ä°N)

        "MaÅŸtered" olmadÄ±ÄŸÄ± iÃ§in ilerleme repetition_count ile Ã¶lÃ§Ã¼lÃ¼r:
        
        Seviye Kategorileri:
            ğŸ†• Yeni Kelimeler: repetition_count = 0
            ğŸ“š BaÅŸlangÄ±Ã§ Seviyesi: repetition_count = 1-5
            ğŸ”¥ Orta Seviye: repetition_count = 6-10
            â­ Ä°leri Seviye: repetition_count = 11+
        
        UI GÃ¶sterimleri:
            Toplam kelime: 1000
            Ã‡alÄ±ÅŸÄ±lmÄ±ÅŸ: 125 (repetition_count > 0)
            Yeni: 875 (repetition_count = 0)
            
            DaÄŸÄ±lÄ±m:
                BaÅŸlangÄ±Ã§: 82 kelime
                Orta: 31 kelime
                Ä°leri: 12 kelime
        
        Ä°lerleme YÃ¼zdesi:
            (Ã‡alÄ±ÅŸÄ±lmÄ±ÅŸ / Toplam) * 100
            (125 / 1000) * 100 = %12.5

    15. "NERDEYÄ°M?" SORUSUNUN CEVABI

        KullanÄ±cÄ± "Neredeyim?" dediÄŸinde sistem:
        
        current_step
        progress kayÄ±tlarÄ±
        kelime hiyerarÅŸisi
        
        Ã¼zerinden ÅŸu bilgileri otomatik hesaplar:
        
        Hangi kursta
        Hangi Ã¼nitede
        KaÃ§Ä±ncÄ± kelimede
        Toplam kaÃ§ kelime Ã¶ÄŸrendi
        
    Bu bilgiler veritabanÄ±nda AYRI AYRI tutulmaz. HesaplanÄ±r.

    16. TASARIMIN ANA Ä°LKELERÄ° (Ã–ZET)

    17. GLOBAL MANTIKSAL ADRESLEME (LOGICAL ADDRESSING)

        Sistem, her veri parÃ§asÄ±nÄ± (kartÄ±) evrensel bir adresle tanÄ±mlar:
        
        Format: [USER_ID].[COURSE_ID].[UNIT_ID].[ORDER_NUMBER]
        Ã–rnek:  36.1.4.25
        AnlamÄ±: 36 ID'li kullanÄ±cÄ±nÄ±n, 1 ID'li kursundaki, 4. Ã¼nitenin, 25. kelimesi.

        Ã–NEMLÄ° MÄ°MARÄ° NOTLAR:
        1. Bu adresleme "Sanal"dÄ±r. VeritabanÄ±nda tek bir "36.1.4.25" sÃ¼tunu yoktur.
        2. Sistem anlÄ±k olarak bu parÃ§alarÄ± birleÅŸtirip Ã¶n yÃ¼ze sunar. Ek yÃ¼k (load) oluÅŸturmaz.
        3. Tek VeritabanÄ± (Monolithic): Her kullanÄ±cÄ± iÃ§in ayrÄ± veritabanÄ± aÃ§Ä±lmaz. Milyonlarca kullanÄ±cÄ± tek bir tabloda (UserProgress) tutulur, ancak hepsi "user_id" anahtarÄ± ile izole edilir.
        4. Tek Kurs / Ã‡ok Kurs: Sistem altyapÄ±sÄ± teknik olarak birden fazla kursu (Ä°ngilizce, Ä°spanyolca vb.) destekler (course_id ile). Ancak ÅŸu an sadece tek kurs (English) aktif olmasÄ± performansÄ± etkilemez.

    18. TASARIMIN ANA Ä°LKELERÄ° (Ã–ZET)

        MantÄ±ksal adresleme â‰  veritabanÄ± ID
        Zaman yok, sadece adÄ±m var
        Fibonacci tekrar zorunlu
        KullanÄ±cÄ± hÄ±zÄ± sistemi belirler
        BoÅŸ adÄ±m yok
        Sistem sade ama deterministik

-----------------------
-----------------------
   1. VeritabanÄ± TasarÄ±mÄ± (SQL)ArtÄ±k karmaÅŸÄ±k kuyruklara ihtiyacÄ±mÄ±z yok. Sadece kelimenin "Hangi adÄ±mda tekrar edileceÄŸi" bilgisini tutmamÄ±z yeterli.
  
        Tablo: UserProgress (KullanÄ±cÄ± Ä°lerlemesi)
        id   user_id   word_id   repetition_count   next_review_step 
        101      1       47            3                 14 
        102      1       89            4                 14 
        103      1       12            1                 17 

   
            Tablo: Users (KullanÄ±cÄ± Bilgisi)
            id   username   active_course_id
            1    Ahmet      1
            
        Tablo: UserCourseProgress (Kurs BazlÄ± Ä°lerleme)
            user_id   course_id   current_step
            1         1           11
            1         2           5
            1         3           1
            
            Not: Her kullanÄ±cÄ±-kurs kombinasyonu iÃ§in ayrÄ± current_step.
            Kurs deÄŸiÅŸiminde hiÃ§ veri kaybÄ± olmaz.
    
    2. Sistemin Ã‡alÄ±ÅŸma AlgoritmasÄ± (Backend Kodu)KullanÄ±cÄ± "Ã‡alÄ±ÅŸmaya BaÅŸla" dediÄŸinde arka planda Ã§alÄ±ÅŸacak fonksiyon ÅŸu ÅŸekilde olacaktÄ±r:
  
            Python
            # active_course_id Users.active_course_id alanÄ±ndan alÄ±nÄ±r
            # Fonksiyon adÄ±: get_step_content (tÃ¼m belgede tutarlÄ±)
            
            def get_step_content(user_id, active_course_id, skip_count=0):
                # 1. KullanÄ±cÄ±nÄ±n ÅŸu an kaÃ§Ä±ncÄ± adÄ±mda olduÄŸunu Ã¶ÄŸren
                current_step = db.get_user_step(user_id, active_course_id) # Kurs bazlÄ±!
                
                study_list = []

                # --- A. YENÄ° KELÄ°ME KONTROLÃœ (1-4-7-10 KuralÄ±) ---
                # Matematik: (AdÄ±m - 1) 3'e tam bÃ¶lÃ¼nÃ¼yorsa yeni kelime vardÄ±r.
                if (current_step - 1) % 3 == 0:
                    new_word = db.get_next_new_word(user_id, active_course_id)
                    if new_word:
                        study_list.append({
                            "type": "NEW",
                            "word": new_word,
                            "gap": 0 # Ä°lk giriÅŸ
                        })

                # --- B. TEKRAR KELÄ°MELERÄ° KONTROLÃœ ---
                # VeritabanÄ±na sor: "Gelecek tekrarÄ± 11. adÄ±m olan kelimeler hangileri?"
                # Ã–NEMLÄ°: Sadece aktif kursun kelimelerini getir (kurs karÄ±ÅŸmasÄ±nÄ± Ã¶nlemek iÃ§in)
                reviews = db.query(
                    """SELECT * FROM UserProgress 
                       WHERE user_id = ? 
                       AND next_review_step = ?
                       AND word_id IN (SELECT id FROM Words WHERE course_id = ?)""",
                    (user_id, current_step, active_course_id)
                )
                
                for word in reviews:
                    study_list.append({
                        "type": "REVIEW",
                        "word": word,
                        "gap": fibonacci(word.repetition_count) # Bir sonraki adÄ±m iÃ§in hesaplanacak
                    })

                # --- C. LÄ°STE BOÅ MU DOLU MU? ---
                if len(study_list) > 0:
                    # KullanÄ±cÄ±ya bu listeyi (kartlarÄ±) sÄ±rayla gÃ¶ster
                    return study_list
                else:
                    # EÄŸer bu adÄ±mda hiÃ§ kart yoksa (BoÅŸ AdÄ±m), 
                    # kullanÄ±cÄ±yÄ± otomatik olarak bir sonraki adÄ±ma geÃ§ir ve tekrar dene.
                    db.increment_user_step(user_id)
                    return get_session_content(user_id) # Recursive (Kendini tekrar Ã§aÄŸÄ±r)

    3. KullanÄ±cÄ± Bir KartÄ± TamamladÄ±ÄŸÄ±nda Ne Olur?
        KullanÄ±cÄ± kartÄ± tamamladÄ±ÄŸÄ±nda, o kelimeyi bir sonraki adÄ±ma (SatÄ±ra) fÄ±rlatacaÄŸÄ±z.
        Senaryo: KullanÄ±cÄ± 11. adÄ±mda "Apple" kelimesini tamamladÄ±.
        Mevcut Seviye: 3 (Fibonacci deÄŸeri 2 idi).
        Yeni Seviye: 4 olacak.
        Yeni Gap: Fibonacci(4) = 3.
        Hedef AdÄ±m: Mevcut AdÄ±m (11) + Gap (3) = 14. AdÄ±m.
        VeritabanÄ± gÃ¼ncellenir: UPDATE Progress SET repetition_count=4, next_review_step=14 WHERE word_id=47
        Bu iÅŸlem sepetteki (11. adÄ±mdaki) tÃ¼m kartlar bitene kadar devam eder. Sepet boÅŸaldÄ±ÄŸÄ±nda Users tablosundaki current_step 12 yapÄ±lÄ±r.

    SonuÃ§
        Bu yapÄ±, senin "Excel SatÄ±rÄ±" mantÄ±ÄŸÄ±nla birebir Ã¶rtÃ¼ÅŸÃ¼yor.
        AdÄ±m 11 (SatÄ±r 11): Sepeti getir.
        Kartlar (SÃ¼tunlar): Sepettekileri tek tek erit.
        SonuÃ§: Kelimeleri gelecekteki satÄ±rlara fÄ±rlat (Fibonacci formÃ¼lÃ¼ne gÃ¶re artan aralÄ±klara).
        Bitince: AdÄ±m 12'ye geÃ§.
----------------------
----------------------
